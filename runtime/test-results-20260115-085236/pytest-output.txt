============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.2, pluggy-1.6.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /home/galanichandan/PrivateVault-Mega-Repo
configfile: pytest.ini
plugins: cov-7.0.0, asyncio-1.3.0, anyio-4.9.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 16 items / 13 errors

==================================== ERRORS ====================================
______________ ERROR collecting tests/benchmarks/test_latency.py _______________
ImportError while importing test module '/home/galanichandan/PrivateVault-Mega-Repo/tests/benchmarks/test_latency.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
../.local/lib/python3.12/site-packages/_pytest/python.py:507: in importtestmodule
    mod = import_path(
../.local/lib/python3.12/site-packages/_pytest/pathlib.py:587: in import_path
    importlib.import_module(module_name)
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1387: in _gcd_import
    ???
<frozen importlib._bootstrap>:1360: in _find_and_load
    ???
<frozen importlib._bootstrap>:1331: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:935: in _load_unlocked
    ???
../.local/lib/python3.12/site-packages/_pytest/assertion/rewrite.py:197: in exec_module
    exec(co, module.__dict__)
tests/benchmarks/test_latency.py:2: in <module>
    from galani.crypto.selector import get_crypto_backend
E   ModuleNotFoundError: No module named 'galani'
____________ ERROR collecting tests/regression/test_core_payload.py ____________
ImportError while importing test module '/home/galanichandan/PrivateVault-Mega-Repo/tests/regression/test_core_payload.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
../.local/lib/python3.12/site-packages/_pytest/python.py:507: in importtestmodule
    mod = import_path(
../.local/lib/python3.12/site-packages/_pytest/pathlib.py:587: in import_path
    importlib.import_module(module_name)
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1387: in _gcd_import
    ???
<frozen importlib._bootstrap>:1360: in _find_and_load
    ???
<frozen importlib._bootstrap>:1331: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:935: in _load_unlocked
    ???
../.local/lib/python3.12/site-packages/_pytest/assertion/rewrite.py:197: in exec_module
    exec(co, module.__dict__)
tests/regression/test_core_payload.py:1: in <module>
    from auth import authorize_enveloped_intent
auth.py:1: in <module>
    from jose import JWTError, jwt
E   ModuleNotFoundError: No module named 'jose'
______________ ERROR collecting tests/regression/test_fintech.py _______________
ImportError while importing test module '/home/galanichandan/PrivateVault-Mega-Repo/tests/regression/test_fintech.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
../.local/lib/python3.12/site-packages/_pytest/python.py:507: in importtestmodule
    mod = import_path(
../.local/lib/python3.12/site-packages/_pytest/pathlib.py:587: in import_path
    importlib.import_module(module_name)
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1387: in _gcd_import
    ???
<frozen importlib._bootstrap>:1360: in _find_and_load
    ???
<frozen importlib._bootstrap>:1331: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:935: in _load_unlocked
    ???
../.local/lib/python3.12/site-packages/_pytest/assertion/rewrite.py:197: in exec_module
    exec(co, module.__dict__)
tests/regression/test_fintech.py:1: in <module>
    from auth import authorize_intent
auth.py:1: in <module>
    from jose import JWTError, jwt
E   ModuleNotFoundError: No module named 'jose'
_____________ ERROR collecting tests/regression/test_hardening.py ______________
ImportError while importing test module '/home/galanichandan/PrivateVault-Mega-Repo/tests/regression/test_hardening.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
../.local/lib/python3.12/site-packages/_pytest/python.py:507: in importtestmodule
    mod = import_path(
../.local/lib/python3.12/site-packages/_pytest/pathlib.py:587: in import_path
    importlib.import_module(module_name)
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1387: in _gcd_import
    ???
<frozen importlib._bootstrap>:1360: in _find_and_load
    ???
<frozen importlib._bootstrap>:1331: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:935: in _load_unlocked
    ???
../.local/lib/python3.12/site-packages/_pytest/assertion/rewrite.py:197: in exec_module
    exec(co, module.__dict__)
tests/regression/test_hardening.py:1: in <module>
    from auth import authorize_intent
auth.py:1: in <module>
    from jose import JWTError, jwt
E   ModuleNotFoundError: No module named 'jose'
_____________ ERROR collecting tests/regression/test_legaltech.py ______________
ImportError while importing test module '/home/galanichandan/PrivateVault-Mega-Repo/tests/regression/test_legaltech.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
../.local/lib/python3.12/site-packages/_pytest/python.py:507: in importtestmodule
    mod = import_path(
../.local/lib/python3.12/site-packages/_pytest/pathlib.py:587: in import_path
    importlib.import_module(module_name)
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1387: in _gcd_import
    ???
<frozen importlib._bootstrap>:1360: in _find_and_load
    ???
<frozen importlib._bootstrap>:1331: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:935: in _load_unlocked
    ???
../.local/lib/python3.12/site-packages/_pytest/assertion/rewrite.py:197: in exec_module
    exec(co, module.__dict__)
tests/regression/test_legaltech.py:1: in <module>
    from auth import authorize_intent
auth.py:1: in <module>
    from jose import JWTError, jwt
E   ModuleNotFoundError: No module named 'jose'
______________ ERROR collecting tests/regression/test_medtech.py _______________
ImportError while importing test module '/home/galanichandan/PrivateVault-Mega-Repo/tests/regression/test_medtech.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
../.local/lib/python3.12/site-packages/_pytest/python.py:507: in importtestmodule
    mod = import_path(
../.local/lib/python3.12/site-packages/_pytest/pathlib.py:587: in import_path
    importlib.import_module(module_name)
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1387: in _gcd_import
    ???
<frozen importlib._bootstrap>:1360: in _find_and_load
    ???
<frozen importlib._bootstrap>:1331: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:935: in _load_unlocked
    ???
../.local/lib/python3.12/site-packages/_pytest/assertion/rewrite.py:197: in exec_module
    exec(co, module.__dict__)
tests/regression/test_medtech.py:1: in <module>
    from auth import authorize_intent
auth.py:1: in <module>
    from jose import JWTError, jwt
E   ModuleNotFoundError: No module named 'jose'
__________ ERROR collecting tests/regression/test_policy_migration.py __________
ImportError while importing test module '/home/galanichandan/PrivateVault-Mega-Repo/tests/regression/test_policy_migration.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
../.local/lib/python3.12/site-packages/_pytest/python.py:507: in importtestmodule
    mod = import_path(
../.local/lib/python3.12/site-packages/_pytest/pathlib.py:587: in import_path
    importlib.import_module(module_name)
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1387: in _gcd_import
    ???
<frozen importlib._bootstrap>:1360: in _find_and_load
    ???
<frozen importlib._bootstrap>:1331: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:935: in _load_unlocked
    ???
../.local/lib/python3.12/site-packages/_pytest/assertion/rewrite.py:197: in exec_module
    exec(co, module.__dict__)
tests/regression/test_policy_migration.py:1: in <module>
    from auth import authorize_intent
auth.py:1: in <module>
    from jose import JWTError, jwt
E   ModuleNotFoundError: No module named 'jose'
____________ ERROR collecting tests/regression/test_shadow_mode.py _____________
ImportError while importing test module '/home/galanichandan/PrivateVault-Mega-Repo/tests/regression/test_shadow_mode.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
../.local/lib/python3.12/site-packages/_pytest/python.py:507: in importtestmodule
    mod = import_path(
../.local/lib/python3.12/site-packages/_pytest/pathlib.py:587: in import_path
    importlib.import_module(module_name)
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1387: in _gcd_import
    ???
<frozen importlib._bootstrap>:1360: in _find_and_load
    ???
<frozen importlib._bootstrap>:1331: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:935: in _load_unlocked
    ???
../.local/lib/python3.12/site-packages/_pytest/assertion/rewrite.py:197: in exec_module
    exec(co, module.__dict__)
tests/regression/test_shadow_mode.py:1: in <module>
    from auth import authorize_intent, shadow_decide_intent
auth.py:1: in <module>
    from jose import JWTError, jwt
E   ModuleNotFoundError: No module named 'jose'
_______________ ERROR collecting tests/regression/test_verify.py _______________
ImportError while importing test module '/home/galanichandan/PrivateVault-Mega-Repo/tests/regression/test_verify.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
../.local/lib/python3.12/site-packages/_pytest/python.py:507: in importtestmodule
    mod = import_path(
../.local/lib/python3.12/site-packages/_pytest/pathlib.py:587: in import_path
    importlib.import_module(module_name)
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1387: in _gcd_import
    ???
<frozen importlib._bootstrap>:1360: in _find_and_load
    ???
<frozen importlib._bootstrap>:1331: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:935: in _load_unlocked
    ???
../.local/lib/python3.12/site-packages/_pytest/assertion/rewrite.py:197: in exec_module
    exec(co, module.__dict__)
tests/regression/test_verify.py:1: in <module>
    from auth import authorize_intent
auth.py:1: in <module>
    from jose import JWTError, jwt
E   ModuleNotFoundError: No module named 'jose'
________________ ERROR collecting tests/test_capability_flow.py ________________
ImportError while importing test module '/home/galanichandan/PrivateVault-Mega-Repo/tests/test_capability_flow.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
../.local/lib/python3.12/site-packages/_pytest/python.py:507: in importtestmodule
    mod = import_path(
../.local/lib/python3.12/site-packages/_pytest/pathlib.py:587: in import_path
    importlib.import_module(module_name)
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1387: in _gcd_import
    ???
<frozen importlib._bootstrap>:1360: in _find_and_load
    ???
<frozen importlib._bootstrap>:1331: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:935: in _load_unlocked
    ???
../.local/lib/python3.12/site-packages/_pytest/assertion/rewrite.py:197: in exec_module
    exec(co, module.__dict__)
tests/test_capability_flow.py:1: in <module>
    from policy_registry import register_policy, activate_policy
E   ModuleNotFoundError: No module named 'policy_registry'
_________________ ERROR collecting tests/test_replay_redis.py __________________
../.local/lib/python3.12/site-packages/redis/connection.py:264: in connect
    sock = self.retry.call_with_retry(
../.local/lib/python3.12/site-packages/redis/retry.py:46: in call_with_retry
    return do()
           ^^^^
../.local/lib/python3.12/site-packages/redis/connection.py:265: in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            ^^^^^^^^^^^^^^^
../.local/lib/python3.12/site-packages/redis/connection.py:627: in _connect
    raise err
../.local/lib/python3.12/site-packages/redis/connection.py:615: in _connect
    sock.connect(socket_address)
E   OSError: [Errno 99] Cannot assign requested address

During handling of the above exception, another exception occurred:
tests/test_replay_redis.py:21: in <module>
    print("First use:", check_nonce(nonce))   # EXPECT True
                        ^^^^^^^^^^^^^^^^^^
tests/test_replay_redis.py:14: in check_nonce
    if r.exists(key):
       ^^^^^^^^^^^^^
../.local/lib/python3.12/site-packages/redis/commands/core.py:1736: in exists
    return self.execute_command("EXISTS", *names)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../.local/lib/python3.12/site-packages/redis/client.py:533: in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../.local/lib/python3.12/site-packages/redis/connection.py:1086: in get_connection
    connection.connect()
../.local/lib/python3.12/site-packages/redis/connection.py:270: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error 99 connecting to localhost:6379. Cannot assign requested address.
______________ ERROR collecting tests/test_synthetic_pipeline.py _______________
ImportError while importing test module '/home/galanichandan/PrivateVault-Mega-Repo/tests/test_synthetic_pipeline.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
../.local/lib/python3.12/site-packages/_pytest/python.py:507: in importtestmodule
    mod = import_path(
../.local/lib/python3.12/site-packages/_pytest/pathlib.py:587: in import_path
    importlib.import_module(module_name)
/usr/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1387: in _gcd_import
    ???
<frozen importlib._bootstrap>:1360: in _find_and_load
    ???
<frozen importlib._bootstrap>:1331: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:935: in _load_unlocked
    ???
../.local/lib/python3.12/site-packages/_pytest/assertion/rewrite.py:197: in exec_module
    exec(co, module.__dict__)
tests/test_synthetic_pipeline.py:3: in <module>
    from policy_engine import generate_synthetic_data, authorize_intent, infer_risk
E   ModuleNotFoundError: No module named 'policy_engine'
________________ ERROR collecting tests/unit/test_validators.py ________________
tests/unit/test_validators.py:6: in <module>
    from security.validation.validators import (
security/validation/validators.py:49: in <module>
    class FraudDetectRequest(BaseModel):
security/validation/validators.py:54: in FraudDetectRequest
    card_last4: str = Field(regex=r'^\d{4}$')
                      ^^^^^^^^^^^^^^^^^^^^^^^
../.local/lib/python3.12/site-packages/pydantic/fields.py:796: in Field
    raise PydanticUserError('`regex` is removed. use `pattern` instead', code='removed-kwargs')
E   pydantic.errors.PydanticUserError: `regex` is removed. use `pattern` instead
E   
E   For further information visit https://errors.pydantic.dev/2.5/u/removed-kwargs
=============================== warnings summary ===============================
ledgers/worm_fallback.py:18
  /home/galanichandan/PrivateVault-Mega-Repo/ledgers/worm_fallback.py:18: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat()

security/validation/validators.py:14
  /home/galanichandan/PrivateVault-Mega-Repo/security/validation/validators.py:14: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/
    @validator('agent_id')

security/validation/validators.py:21
  /home/galanichandan/PrivateVault-Mega-Repo/security/validation/validators.py:21: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/
    @validator('action')

security/validation/validators.py:40
  /home/galanichandan/PrivateVault-Mega-Repo/security/validation/validators.py:40: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/
    @validator('amount')

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
ERROR tests/benchmarks/test_latency.py
ERROR tests/regression/test_core_payload.py
ERROR tests/regression/test_fintech.py
ERROR tests/regression/test_hardening.py
ERROR tests/regression/test_legaltech.py
ERROR tests/regression/test_medtech.py
ERROR tests/regression/test_policy_migration.py
ERROR tests/regression/test_shadow_mode.py
ERROR tests/regression/test_verify.py
ERROR tests/test_capability_flow.py
ERROR tests/test_replay_redis.py - redis.exceptions.ConnectionError: Error 99 connecting to localhost:6379. Cannot assign requested address.
ERROR tests/test_synthetic_pipeline.py
ERROR tests/unit/test_validators.py - pydantic.errors.PydanticUserError: `regex` is removed. use `pattern` instead

For further information visit https://errors.pydantic.dev/2.5/u/removed-kwargs
!!!!!!!!!!!!!!!!!!! Interrupted: 13 errors during collection !!!!!!!!!!!!!!!!!!!
======================== 4 warnings, 13 errors in 6.23s ========================
